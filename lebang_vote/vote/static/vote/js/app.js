webpackJsonp([1],{124:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(32),a=n.n(i),o=n(54),s=(n.n(o),n(31)),r=n(52),c=n.n(r),l=n(53),u=n.n(l),d=n(55),f=n(33),v=n(34),p=n(56);s.a.config.productionTip=!1,s.a.prototype.$toast=v.a,s.a.prototype.$axios=c.a,s.a.prototype.$utils=f,a()(p).forEach(function(t){s.a.filter(t,p[t])}),new s.a({el:"#app",router:d.a,template:"<App/>",components:{App:u.a}})},125:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},126:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),a=n.n(i);e.default={data:function(){return{header:{title:"乐帮投票"},detail:{}}},components:{headerBar:a.a},beforeRouteEnter:function(t,e,n){n(function(t){t.setFrom(e)})},created:function(){var t=this;this.id=this.$route.params.id,this.id&&this.$axios.get("/game/api/options/"+this.id).then(function(e){var n=e.data;t.detail=n})},methods:{back:function(){this.$router.replace({path:this.from.fullPath})},postVote:function(){var t=this;this.$axios.post("/game/api/vote",{id:this.detail.id}).then(function(e){0===e.data.code?(t.$toast("投票成功！"),t.detail.voted=!0,t.detail.count_vote++):t.$toast(e.data.error)})},setFrom:function(t){this.from=t}}}},127:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),a=n.n(i);e.default={data:function(){return{header:{title:"乐帮投票",closeWindow:!0},list:[]}},components:{headerBar:a.a},created:function(){var t=this;this.$axios.get("/game/api/games/?format=json").then(function(e){t.list=e.data})}}},128:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{title:{type:String,default:"导航栏"},next:{type:Boolean,default:!1},closeWindow:{type:Boolean,default:!1}},methods:{back:function(){this.$emit("back")}}}},129:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),a=n.n(i);e.default={data:function(){return{header:{title:"乐帮投票"},showContent:!0,vote:{}}},components:{headerBar:a.a},created:function(){var t=this;this.id=this.$route.params.id,this.id&&this.$axios.get("/game/api/games/"+this.id).then(function(e){var n=e.data;t.vote=n})},methods:{back:function(){this.$router.replace({name:"VoteList"})},postVote:function(t,e){var n=this;t.cancelBubble=!0,this.$axios.post("/game/api/vote",{id:e.id}).then(function(t){0===t.data.code?(n.$toast("投票成功！"),e.voted=!0,e.count_vote++,n.vote.voted_amount++):n.$toast(t.data.error)})},formatDate:function(t){return t.replace(/[T|Z]/g," ")},shrinkText:function(t){return t&&t.length>14&&(t=t.slice(0,14)+"..."),t}}}},17:function(t,e,n){var i=n(8)(n(128),n(81),null,null,null);t.exports=i.exports},33:function(t,e,n){"use strict";function i(t){return r(t,"Array")}function a(t){return r(t,"Object")}function o(t){return r(t,"Function")}function s(t){return!t||(!(!i(t)||0!==t.length)||!(!a(t)||0!==w()(t).length))}function r(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function c(t,e,i,a){return t.length>e?(i&&n.i($.a)("长度不能超过"+e+"字！"),a&&a(),!1):!(t.length<=0)||(i&&n.i($.a)(i),a&&a(),!1)}function l(t,e){/^\d{4}(-|[\u4e00-\u9fa5])\d{1,2}(-|[\u4e00-\u9fa5])\d{1,2}/.test(t)&&(t=new Date(t.replace(/-|[\u4e00-\u9fa5]/g,"/"))),t=new Date(t);var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e}function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];return i=t.sort(function(t,n){return t[e]<=n[e]?1:-1}),n?i.reverse():i}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];return i=t.sort(function(n,i){return"function"==typeof String.prototype.localeCompare?n[e].localeCompare(i[e]):t}),n?i.reverse():i}function f(t,e){var n=[];return t.forEach(function(t){t.includes(e)&&n.push(t)}),0===n.length?t:n}function v(t,e){t.id=e.id,t.params=e,t.columns.forEach(function(t){"select"===t.type?t.value=t.multiple?t.model.text.join(","):t.model.text:t.value=t.model})}function p(t){return"select"===t.type?t.model.value:t.model}function _(t,e){t.$refs[e].$el.classList.remove("hide"),setTimeout(function(){t.$refs[e].$el.classList.remove("fade")},200)}function m(t){if(t)return t.previousElementSibling||t.previousSibling}function h(t){if(t)return t.nextElementSibling||t.nextSibling}function g(t,e){if(t&&e){var n=t;if(e.indexOf("#")>-1)for(;n.parentNode.id!==e.slice(1);)n=n.parentNode;else if(e.indexOf(".")>-1)for(;n.parentNode.classList.contains(e.slice(1));)n=n.parentNode;else for(;n.parentNode.tagName.toLowerCase()!==e;)n=n.parentNode;return n.parentNode}}function b(t,e){if(t&&e){var n=t;if(e.indexOf("#")>-1)for(;m(n).id!==e.slice(1);)n=m(n);else if(e.indexOf(".")>-1)for(;m(n).classList.contains(e.slice(1));)n=m(n);else for(;m(n).tagName.toLowerCase()!==e;)n=m(n);return m(n)}}function x(t,e){if(t&&e){var n=t;if(e.indexOf("#")>-1)for(;h(n).id!==e.slice(1);)n=h(n);else if(e.indexOf(".")>-1){for(;n.parentNode.classList.contains(e.slice(1));)n=h(n);for(;h(n).classList.contains(e.slice(1));)n=h(n)}else for(;h(n).tagName.toLowerCase()!==e;)n=h(n);return h(n)}}function y(t,e){if(t){for(var n=t.previousSibling,i=[];n;)1===t.nodeType&&i.push(n),n=n.previousSibling;for(n=t.nextSibling;n;)1===t.nodeType&&i.push(n),n=n.nextSibling;return i}}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"EFFECTIVE_TIME",function(){return E}),n.d(e,"SOCIAL_ROUNDING_MODE",function(){return k}),n.d(e,"SOCIAL_RULE",function(){return O}),e.isArray=i,e.isObject=a,e.isFunction=o,e.isEmpty=s,e.isType=r,e.validateLength=c,e.fmtDate=l,e.sortBy=u,e.sortByCh=d,e.filterArray=f,e.updateEditableView=v,e.formatEditableParams=p,e.openModal=_,e.prevSibling=m,e.nextSibling=h,e.parent=g,e.prev=b,e.next=x,e.siblings=y;var C=n(32),w=n.n(C),$=n(34),E=[{value:"current",text:"本月生效"},{value:"next",text:"下月生效"}],k={rounding_to_fen:"四舍五入到分",rounding_to_jiao:"四舍五入到角",rounding_to_yuan:"四舍五入到元",ceil_to_jiao:"见分进角",ceil_to_yuan:"见角进元",ignore_fraction:"舍弃小数",rounding_0_or_5:"加1或2后取整0或5"},O={fixed:"固定值",salary:"基本工资","salary+performance":"基本工资+绩效工资"}},34:function(t,e,n){"use strict";var i=n(123),a=n.n(i),o=function(t){var e={};"object"===(void 0===t?"undefined":a()(t))?(e.msg=t.msg||"网络出现错误，请稍后重试",e.timer=t.time||2e3,e.type=t.type):(e.msg=t||"网络出现错误，请稍后重试",e.timer=2e3);var n=document.getElementById("toast");n?n.style.display="block":(n=document.createElement("div"),n.setAttribute("id","toast"),n.className="ev-toast",document.body.appendChild(n)),n.innerHTML='<div class="ev-toast-msg"><i class="'+e.type+'"></i>'+e.msg+"</div>",setTimeout(function(){n.style.display="none"},e.timer)};e.a=o},53:function(t,e,n){function i(t){n(88)}var a=n(8)(n(125),n(83),i,null,null);t.exports=a.exports},54:function(t,e){},55:function(t,e,n){"use strict";var i=n(31),a=n(119),o=n(77),s=n.n(o),r=n(78),c=n.n(r),l=n(76),u=n.n(l);i.a.use(a.a),e.a=new a.a({mode:"history",routes:[{path:"/vote",name:"VoteList",component:s.a},{path:"/vote/:id",name:"Vote",component:c.a},{path:"/vote/detail/:id",name:"VoteDetail",component:u.a}]})},56:function(t,e,n){"use strict";function i(t,e){return s.fmtDate(new Date(t),e)}function a(t,e,n){return s.sortByCh(t,e,n)}function o(t,e){return s.filterArray(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.date=i,e.sortByCh=a,e.filterArray=o;var s=n(33)},76:function(t,e,n){function i(t){n(87)}var a=n(8)(n(126),n(82),i,"data-v-bb03f932",null);t.exports=a.exports},77:function(t,e,n){function i(t){n(85)}var a=n(8)(n(127),n(79),i,"data-v-079c5698",null);t.exports=a.exports},78:function(t,e,n){function i(t){n(86)}var a=n(8)(n(129),n(80),i,"data-v-49447100",null);t.exports=a.exports},79:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"vote-list"},[n("header-bar",{attrs:{title:t.header.title,closeWindow:t.header.closeWindow}}),t._v(" "),n("ul",{staticClass:"list bg-white border-bottom"},t._l(t.list,function(e,i){return n("li",{key:i,staticClass:"border-top"},[n("router-link",{staticClass:"arrow-right",attrs:{tag:"a",to:{path:"/vote/"+e.id}}},[t._v(t._s(e.title))])],1)}))],1)},staticRenderFns:[]}},80:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"vote"},[n("header-bar",{attrs:{title:t.header.title},on:{back:t.back}}),t._v(" "),n("div",{staticClass:"content"},[n("ul",{staticClass:"statistics flex"},[n("li",[n("h3",[t._v("参与选手")]),t._v(" "),n("em",[t._v(t._s(t.vote.options?t.vote.options.length:0))])]),t._v(" "),n("li",[n("h3",[t._v("累计投票")]),t._v(" "),n("em",[t._v(t._s(t.vote.voted_amount))])]),t._v(" "),n("li",[n("h3",[t._v("访问次数")]),t._v(" "),n("em",[t._v(t._s(t.vote.visited))])])]),t._v(" "),n("div",{staticClass:"time"},[n("p",[n("i",{staticClass:"fa fa-clock-o"}),t._v("开始时间："+t._s(t.vote.start?t.formatDate(t.vote.start):""))]),t._v(" "),n("p",[n("i",{staticClass:"fa fa-clock-o"}),t._v("结束时间："+t._s(t.vote.end?t.formatDate(t.vote.end):""))])]),t._v(" "),t.vote.rule?n("p",{staticClass:"rule"},[n("i",{staticClass:"fa fa-warning-o"}),t._v("投票规则："+t._s(t.vote.content))]):t._e(),t._v(" "),t.vote.content?n("div",{staticClass:"article"},[n("button",{staticClass:"link arrow-bottom",on:{click:function(e){t.showContent=!t.showContent}}},[n("i",{staticClass:"fa fa-list-alt"}),t._v("活动介绍   ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showContent,expression:"showContent"}]},[n("h2",[t._v(t._s(t.vote.title))]),t._v(" "),n("p",{staticClass:"vote-content",domProps:{innerHTML:t._s(t.vote.content)}})])]):t._e(),t._v(" "),n("ul",{staticClass:"options flex"},t._l(t.vote.options,function(e,i){return n("router-link",{key:i,attrs:{tag:"li",to:{path:"/vote/detail/"+e.id}}},[e.image_url?n("img",{attrs:{src:e.image_url}}):t._e(),t._v(" "),n("span",{ref:"detail",refInFor:!0,staticClass:"desc"},[t._v(t._s(++i+".")+" "+t._s(t.shrinkText(e.title)))]),t._v(" "),n("button",{staticClass:"btn primary",class:{disabled:!e.can_vote},on:{click:function(n){t.postVote(n,e)}}},[t._v(t._s(e.voted?"已投票":"投票"))]),t._v(" "),n("em",[t._v(t._s(e.count_vote))])])}))])],1)},staticRenderFns:[]}},81:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[t.closeWindow?n("a",{staticClass:"back arrow-left tl",attrs:{href:'/native_service?data={"method":"closeWeb"}'}},[t._v(" ")]):n("a",{staticClass:"back arrow-left tl",on:{click:t.back}},[t._v(" ")]),t._v(" "),n("h1",[t._v(t._s(t.title))]),t._v(" "),n("a",{staticClass:"tr",class:{"arrow-right":t.next}},[t._v(" ")])])},staticRenderFns:[]}},82:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"vote-detail"},[n("header-bar",{attrs:{title:t.header.title},on:{back:t.back}}),t._v(" "),t.detail.image_url?n("div",{staticClass:"banner"},[n("img",{attrs:{src:t.detail.image_url,alt:t.detail.title}})]):t._e(),t._v(" "),n("div",{staticClass:"content"},[t.detail.content?n("div",{staticClass:"article"},[n("h2",[t._v(t._s(t.detail.title))]),t._v(" "),n("p",{domProps:{innerHTML:t._s(t.detail.content)}})]):t._e(),t._v(" "),n("div",{staticClass:"action"},[n("button",{staticClass:"btn primary",class:{disabled:!t.detail.can_vote},on:{click:function(e){t.postVote()}}},[t._v(t._s(t.detail.voted?"已投票":"投票"))])]),t._v(" "),n("ul",{staticClass:"statistics flex"},[n("li",[n("span",[t._v("累计投票：")]),n("em",[t._v(t._s(t.detail.count_vote))])]),t._v(" "),n("li",[n("span",[t._v("访问次数：")]),n("em",[t._v(t._s(t.detail.count_visit))])])])])],1)},staticRenderFns:[]}},83:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},85:function(t,e){},86:function(t,e){},87:function(t,e){},88:function(t,e){}},[124]);
//# sourceMappingURL=app.js.map?c0d64116f12e0b0a629a